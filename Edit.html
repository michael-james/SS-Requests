<? var d = getRequest(data.row); ?>

<div class="container" style="padding-top:20px">
    <h1><span class="badge badge-primary">Edit</span> <span class="badge <?= typClass(d.reqCode) ?>"><?= d.reqCode ?></span> <?= d.client + ' ' + d.protocol + (d.batch && (' Batch ' + d.batch)) ?></h1>
    
    <div class="py-3">
      <a id="view-link" class="btn btn-outline-secondary" href="<?=url?>?page=View<?= (data.asst || data.lead || data.admin) && "Admin" ?>&row=<?= d.row ?>">View</a>
    </div>
 
    <form>
      <input type="hidden" id="row" name="row">
      
      <h3 class="mt-3">Study Information</h3>

      <div class="row">
        <div class="form-group col-sm">
          <label for="client">Client</label>
          <input name="Client" type="text" class="form-control" id="client" required>
        </div>
        <div class="form-group col-sm">
          <label for="protocol">Protocol</label>
          <input name="Protocol Number" type="text" class="form-control" id="protocol" required>
        </div>
        <div class="form-group col">
          <label for="vend">Device</label>
          <select name="Translations Vendor(s)" id="vend" class="form-control" required>
            <option value="TB-syn">Tablet syndication</option>
            <option value="HH-syn">Handheld syndication</option>
            <option value="SP 10">SitePad 10"</option>
            <option value="SP 12">SitePad 12"</option>
            <option value="LP E5">LogPad E5</option>
            <option value="LP N5">LogPad N5</option>
          </select>
        </div>
        <div class="form-group col">
          <label for="server">Server</label>
          <select name="Which server is this study on?" id="server" class="form-control" required>
            <option value="K - fileserv">K - fileserv</option>
            <option value="G - genserv">G - genserv</option>
          </select>
        </div>
      </div>
      
      
      <h3 class="mt-3">Request Basics</h3>
    
      <div class="row">
        <div class="form-group col">
          <label for="reqCode">Type</label>
          <select name="Req Code" id="reqCode" class="form-control" required>
            <option selected disabled>enUS v1.00</option>
            <option value="enV1">enUS v1.00</option>
            <option value="enCR">enUS corrections</option>
            <option value="FLv1">foreign language v0.01</option>
            <option value="FLCR">foreign language corrections</option>
            <option value="FLCR">foreign language v0.01 and corrections</option>
            <option value="OTH">other</option>
          </select>
        </div>
        <div class="form-group col-sm">
          <label for="batch">Batch</label>
          <input name="Batch #" type="text" class="form-control" id="batch">
          <small class="form-text text-muted">
            If more than one, separate by comma. <i>eg. 1, 2</i>
          </small>
        </div>
        <div class="form-group col-sm">
          <label for="langCnt"># Languages</label>
          <input name="# of languages/countries for this request" type="number" class="form-control" id="langCnt" required>
        </div>
        <div class="form-group col-sm">
          <label for="astCnt"># Assessments</label>
          <input name="# of assessments for this request" type="number" class="form-control" id="astCnt" required>
        </div>
        <div class="form-group col">
          <label for="vend">Vendor</label>
          <select name="Translations Vendor(s)" id="vend" class="form-control" required>
            <option value="enV1">ICON</option>
            <option value="enCR">Mapi</option>
            <option value="FLv1">RWS</option>
            <option value="FLCR">TPT</option>
            <option value="FLCR">other</option>
          </select>
        </div>
        
      </div>
    
      <div class="row">
        <div class="form-group col">
          <label for="langsV001">Languages (v0.01)</label>
          <textarea class="form-control" name="Languages for v0.01" id="langsV001" rows="3"></textarea>
          <small class="form-text text-muted">
            Please enter languages as their codes (preferred), such as nlBE, or language/country, such as Dutch (Belgium), separated by commas.
          </small>
        </div>
      </div>
      <div class="row">
        <small class="form-text text-muted">
          Please enter languages as their codes (preferred), such as nlBE, or language/country, such as Dutch (Belgium), separated by commas.
        </small>
      </div>
      <div class="row">
        <div class="form-group col">
          <label for="cpyast">Copyrighted Assessments</label>
          <textarea class="form-control" name="Copyrighted assessments for this request" id="cpyast" rows="3"></textarea>
          <small class="form-text text-muted">
            Please use abbreviations when appropriate and separate by commas.
          </small>
        </div>
        <div class="form-group col">
          <label for="nonast">Non-Copyrighted Assessments</label>
          <textarea class="form-control" name="Non-copyrighted assessments for this request" id="nonast" rows="3"></textarea>
          <small class="form-text text-muted">
            Please use abbreviations when appropriate and separate by commas.
          </small>
        </div>
      </div>

      <h4 class="mt-3">Optional Details</h4>

      <div class="row">
        <div class="form-group col-sm">
          <label for="tbbuild">TB-syn Build</label>
          <input name="TB-syn Build #" type="text" class="form-control" id="tbbuild" placeholder="latest">
          <small class="form-text text-muted">
            We will use the latest build if none is specified.
          </small>
        </div>
        <div class="form-group col-sm">
          <label for="hhbuild">HH-syn Build</label>
          <input name="HH-syn Build #" type="text" class="form-control" id="hhbuild" placeholder="latest">
          <small class="form-text text-muted">
            We will use the latest build if none is specified.
          </small>
        </div>
        <div class="row">
          <div class="form-check col-sm-auto">
            <input class="form-check-input" name="Messageboxes screen capture required?" type="checkbox" id="msgbx" value="Yes">
            <label class="form-check-label" for="msgbx">Messagebox?</label>
          </div>
          <small class="form-text text-muted col-sm">
            Please specify in "Additional Notes" which dialog screens are needed for this request or refer to a specific section of the template.
          </small>
        </div>
        <div class="row">
          <div class="form-check col-sm-auto">
            <input class="form-check-input" name="Manual screenshots required?" type="checkbox" id="manscr" value="Yes">
            <label class="form-check-label" for="manscr">Manual scrolling?</label>
          </div>
          <small class="form-text text-muted col-sm">
            Any screens that are not automatically captured, such as messages, reminders, etc. or assessments that require manual screenshots due to scrolling. Please specify in "Additional Notes" which assessments/screens may need to be captured manually.
          </small>
        </div>
      </div>

      </div>
      <div class="row">
        <div class="form-group col">
          <label for="addlnotes">Additional Notes</label>
          <textarea class="form-control" name="Additional Notes" id="addlnotes" rows="3"></textarea>
        </div>
      </div>
    

      <h3 class="mt-3">Timeline</h3>

      <div class="row">
        <div class="form-group col-sm">
          <label for="start">Files Expected</label>
          <input name="Expected Date Files Will Be Available" type="date" class="form-control" id="start" required>
          <small class="form-text text-muted">
            If the files are available now, enter today's date. 
        </small>
        </div>
        <div class="form-group col-sm">
          <label for="prefDue">Preferred Deadline</label>
          <input name="Preferred Deadline" type="date" class="form-control" id="prefDue">
        </div>
        <div class="form-group col-sm">
          <label for="hardDue">Scheduled Deadline</label>
          <input name="Hard Deadline" type="date" class="form-control" id="hardDue" required>
        </div>
        <div class="form-group col-sm">
          <label for="hardtime">Scheduled Deadline Time of Day</label>
          <select name="Hard Deadline Time" id="hardtime" class="form-control" required>
            <option value="Open of Business">Open OB (9 am)</option>
            <option value="Open of Business">Midday (1 pm)</option>
            <option value="Close of Business" selected>Close OB (5 pm)</option>
            <small class="form-text text-muted">
              The time of day you need the files based on the time zone of your office.
            </small>
          </select>
        </div>
      </div>


      <h3 class="mt-3">Additional Information</h3>

      <div class="row">
        <div class="form-group col-sm-3">
          <label for="actwkbks"># Excel files</label>
          <input name="Act. Wkbk. Cnt." type="number" class="form-control" id="actwkbks">
          <small class="form-text text-muted">
            If the files for this request are already available, please enter the total number of Excel workbooks that will be created for this request (v0.01) or corrected for this request (CR).
          </small>
        </div>

        <div class="form-group col">
          <label>File Preparation</label>
          <small class="form-text text-muted">
            <strong> To Assistant</strong><br>
            Please place all files needed for this request (eg. JSONs and Excel workbooks) in the protocol's "<u>...\Translations\z - To Assistant\</u>"" folder on the server inside a folder named with the day the files became available for screenshot generation.<br>
            eg. "<u>K:\Alexion\ALXN1210-PNH-303\Translations\z - To Assistant\2018.10.18</u>".<br><br>

            <strong>Templates &amp; Naming Conventions</strong>
            The only exception to this is files that are generally relevant to the protocol's screenshot generation, such as the most recent macro template or naming convention text files, which do not go inside of a date folder but instead just live in the "<u>...\z - To Assistant</u>" folder. Whenever we update the template, the latest version will go here.<br><br>

            <strong>From Assistant</strong>
            When the request is completed, files will be placed in a new folder named with the date the request was performed and a Request ID which is the [Request #]-[Request Type]-[Batch].<br>
            eg. "<u>...\z - From Assistant\2018.10.18 -- 87-FLCR-3</u>".
          </small>
        </div>
      </div>


      <h4 class="mt-3">enV1 Details</h4>

      <div class="form-group">
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="Excel Macro template" id="tempYes" value="Create new template">
          <label class="form-check-label" for="tempYes">Create new template</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="Excel Macro template" id="tempNo" value="Use existing template">
          <label class="form-check-label" for="tempNo">Use existing template</label>
        </div>
        <small class="form-text text-muted">
          If you have an existing template, include the most recent version at the root of the "<u>...\z - To Assistant</u>" folder of your study.
        </small>
      </div>

      <div class="form-group">
        <label for="naming">Naming Conventions</label>
        <small class="form-text text-muted">
          Workbooks for <strong>copyrighted assessments</strong> will have:
          <ul>
            <li>no AFFIDAVIT</li>
            <li>filenames with <strong>without</strong> client name or protocol number</li>
          </ul>
          Additionally, we will add the assessment to the macro's list of copyrighted assessments.<br>
          <i>eg. EQ-5D-5L_eCOA Handheld_English (Singapore)_v0.02.xlsx</i><br><br>

          Workbooks for <strong>non-copyrighted assessments</strong>will have:
            <ul>
              <li>an AFFIDAVIT screen</li>
              <li>filenames with the client name and protocol number</li>
            </ul>
          <i>eg. Deciphera DCC-2618-03-002_eCOA Handheld_Training Module_English (Singapore)_v0.02.xlsx</i><br><br>

          If your study requires deviations to these standards, please copy and paste the naming conventions here.
        </small>
        <textarea class="form-control" name="Naming Conventions" id="naming" rows="3"></textarea>
      </div>
      
    </form>